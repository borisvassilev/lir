<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
</head>
<body>
<p><a href="http://borisvassilev.github.io/lir/">Lir is a reproducible computing tool</a>. The name Lir stands for <strong>li</strong>terate, <strong>r</strong>eproducible computing.</p>
<h1 id="prerequisites">Prerequisites</h1>
<p>You need a reasonably modern Linux/BSD operating system. Any of the major GNU/Linux and BSD distributions, and OS X fulfil that requirement. It should be possible to use it on Microsoft Windows 10, but at the moment this is not officially supported: however, if you are interested in trying to install Lir on a Windows 10, share your experience.</p>
<p>In particular, you will need an up-to-date version of the GNU Toolchain (<code>autoconf</code>, <code>make</code>, <code>gcc</code>, <code>binutils</code>, <code>glibc</code>), as well as Bash along with the standard command line tools like <code>grep</code>, <code>sed</code>, and <code>awk</code> (to name a few).</p>
<p>Furthermore, you need to install the following software:</p>
<ul>
<li><p><a href="https://www.cs.tufts.edu/~nr/noweb/">Noweb</a>, “A Simple, Extensible Tool for Literate Programming.” Available in the Ubuntu official repositories. You can also <a href="http://packages.debian.org/noweb">look at the Debian package</a> or even attempt to <a href="ftp://www.eecs.harvard.edu/pub/nr">compile it from source</a> (if you do that, make sure you get version 2.11b).</p></li>
<li><p><a href="http://www.swi-prolog.org/">SWI-Prolog</a>, a comprehensive free Prolog environment. It is easy to <a href="http://www.swi-prolog.org/git.html">install from source</a>, and for Ubuntu, the maintainer <a href="http://www.swi-prolog.org/build/Debian.txt">provides a PPA</a>. Just make sure you have the <strong>latest development or stable release</strong>, and not one of the very outdated releases available in the official repositories of most distributions.</p></li>
<li><p><a href="http://pandoc.org/">Pandoc</a>, a universal document converter. Installing from source is a bit of a hustle, but you don’t have to: just get the <a href="http://pandoc.org/installing.html">installer for the latest release</a>. It is important that you have the latest (patched) release, as there have been a non-negative number of bugs in major releases that get in the way.</p></li>
</ul>
<h1 id="recommended-reading">Recommended reading</h1>
<p>Lir makes use of existing tools for literate programming, making, and markup. A working knowledge of these tools is not required, but it is beneficial, at least at the beginning.</p>
<h2 id="makefiles">Makefiles</h2>
<p>It would help you if you had some working knowledge of writing makefiles, as understood by GNU Make. Reading the <a href="https://www.gnu.org/software/make/manual/html_node/index.html">official documentation</a> is a good start; at least take a look at the first few chapters.</p>
<h2 id="markdown">Markdown</h2>
<p>You need to have a basic idea of the concept of <a href="https://en.wikipedia.org/wiki/Markdown">markdown</a>. Armed with this knowledge, open the <a href="http://pandoc.org/README.html">excellent README provided by Pandoc</a> and use it as a reference.</p>
<h2 id="literate-programming-with-noweb">Literate Programming with <code>noweb</code></h2>
<p>Understanding the concept of literate programming is, sadly, a must. You can take a look at the <a href="http://www.literateprogramming.com/knuthweb.pdf">original publication by Donald E. Knuth (pdf link)</a>; you can also skip this at first. The <a href="https://en.wikipedia.org/wiki/Noweb">Wikipedia page for <code>noweb</code></a> contains enough detail to get you acquainted with the syntax. A Lir source file is a valid <code>noweb</code> source file.</p>
<h1 id="installation">Installation</h1>
<p>Once you have all prerequisites, clone this repository and go to the <code>lir</code> directory:</p>
<pre><code>$ git clone https://github.com/borisvassilev/lir.git
$ cd lir</code></pre>
<p>And just follow the usual installation process:</p>
<pre><code>$ ./configure
$ make
$ make install</code></pre>
<p>This should work, as long as you have installed everything in with the default settings. To validate the installation, try to compile the <code>lir.lir</code> source file, using Lir:</p>
<pre><code>$ lir lir.lir</code></pre>
<p>Look for <code>lir.html</code>, and open it in a web browser. If you see the Lir User Guide, followed by a whole bunch of code, you have successfully installed Lir and used it to generate its documentation from its source.</p>
<h1 id="quick-start">Quick start</h1>
<p>This is a minimal example of applying Lir to obtain a result and display it in your final document.</p>
<p>This is the complete Lir source file, named <code>show-size.lir</code>, and <a href="show-size/show-size.lir">available here</a>:</p>
<pre><code>This is a minimal example of how to use Lir.  Here, we will use
the command line tool `wc` (**w**ord **c**ount) to count the
lines, words, and characters in this Lir source file.  We will
display the output in the final document.

We start by declaring a placeholder in a code chunk:
&lt;&lt;:listing size&gt;&gt;=
title: Line, word, and character count
caption: The output of `wc`, when applied to this Lir source file.
@
The name of the code chunk defined above is the string &quot;`:listing
size`&quot;.  The prefix, &quot;`:listing`&quot;, tells Lir that this is a
placeholder for a file that should be displayed verbatim, as a
listing.  The prefix is followed by a single space character and
the name of the file that should be displayed, &quot;`size`&quot;.  Inside
this code chunk, we have defined a title and a caption for the
display item.

The file will be generated by running the command `wc` on this
source file (`show-size.lir`), and saving the output to `size`:
&lt;&lt;:make Generate the file `size`&gt;&gt;=
size: show-size.lir
    wc show-size.lir &gt; size

@
The name of this code chunk has the prefix &quot;`:make `&quot;.  This
prefix tells Lir that the code chunk contains a rule, in Make
syntax.  This particular rule reads:

&gt; The file `size` should be generated.  It depends on the file
&gt; `show-size.lir`.  To generate it, run the command `wc` with a
&gt; single argument, `show-size.lir`, and put the output of that
&gt; command in the file `size`.

**NB**: in the rule above, there must be a single tab character
at the beginning of the second line!

Normally, input files have to be declared as &quot;sources&quot; to the
data analysis.  This can be done using the following declaration,
again in a code chunk:
&lt;&lt;:source show-size.lir&gt;&gt;=
@

To use Lir to interpret this source file, you can invoke `lir`
with the filename as the only argument:
&lt;&lt;: Use Lir to interpret this source file&gt;&gt;=
$ lir show-size.lir
@
(This last code chunk has a name that begins with a colon, &quot;`:`&quot;,
followed by a space.  This will be ignored when interpreting the
source file, but it will show up in the final document.)

An HTML document named `show-size.html` will be generated in the
same directory.  Open it with your web browser!</code></pre>
<p>(In this README, the tab character in this file will probably become 4 spaces. Just take the original file from the link above.)</p>
<p>Generate the final document and open it in your web browser (<a href="http://borisvassilev.github.io/lir/show-size.html">here is what I get</a>). Look around. If you like what you see, you should go on by reading the Tutorial for a somewhat longer introduction.</p>
<h1 id="acknowledgements">Acknowledgements</h1>
<p>This work is done at the University of Helsinki, Finland by Boris Vassilev and Erkka Valo, under the supervision of Sampsa Hautaniemi and Elina Ikonen. It is licenced under the terms of the GPL (see COPYING).</p>
<p>Copyright 2015 Boris Vassilev</p>
<h1 id="unnecessary-stuff">UNNECESSARY STUFF</h1>
<p>Then, figure out where you have installed the <code>noweb</code> library files. If you installed from the official Ubuntu directories, this should be <code>/usr/lib/noweb</code>.</p>
<p>If you cannot find this directory, the directory where the files were installed is mentioned towards the bottom of the <code>nowebfilters</code> man page, under the <code>FILES</code> section. So try this:</p>
<pre><code>$ man nowebfilters</code></pre>
<p>If for some reason you this doesn’t work either, you can try looking for one of the files in the library, for example:</p>
<pre><code>$ locate emptydefn</code></pre>
<p>If you cannot find a file called <code>emptydefn</code> on your system, you have not installed <code>noweb</code>.</p>
<p>Now that you know where the library files are, open the file that contains most of the code of the project, <code>lir.lir</code>. Somewhere in lines 20-26 there are three path definitions that you might need to change.</p>
<p>On line 22 is the folder where all <code>lir</code> components are installed.</p>
<p>On line 24 is the folder where the main <code>lir</code> script will be installed; make sure it is on your system <code>PATH</code>.</p>
<p>On line 26 is the folder containing the <code>noweb</code> library files. If you installed <code>noweb</code> normally (and as root), this will read <code>/urs/lib/noweb</code>.</p>
<p>Now save and close the file, and run:</p>
<pre><code>$ bash bootstrap</code></pre>
<p>You should see a bunch of stuff on your terminal screen, with the bottom line claiming that the “Weaved document is in lir.html”.</p>
</body>
</html>
